<div class="header p-4">
  <div class="container-fluid">
    <div class="row main">
      <div class="col-md-4">
        <div *ngIf="routeType == 1">
          <h1 class="ml-3 mt-4">HRMS</h1>
        </div>

        <div *ngIf="routeType == 2">
          <h1 class="ml-3 mt-4">Timesheet</h1>
        </div>
      </div>
          <!-- <div class="form-group text-center mt-4">
              <select class="form-select form-control" aria-label="Default select">
                  <option selected>Select Candidate</option>
                  <option value="1">ABCD</option>
                  <option value="2">EFGH</option>
                  <option value="3">IJKL</option>
                  <option value="3">MNOP</option>
                  <option value="3">WILSON AM</option>
              </select>
          </div> -->
          <div class="col-md-4">
            <div class="form-group text-center mt-4">
              <label for="search" class="label-large">Search:</label>
              <input [(ngModel)]="searchInput" type="text" class="form-control1 ml-6 mr-2" id="search" placeholder="Search Candidates..." [ngModelOptions]="{standalone: true}">
            </div>
      </div>
      <div class="col-md-4">
          <div class="form-group text-center mt-4 ">
              <button type="button" class="btn btn-wdth text-white" data-toggle="modal" data-target=".bd-example-modal-xl">Add Candidate</button>
          </div>
      </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-6">
      <div class="form-group">
        <div style="display: flex; justify-content: flex-end; align-items: center; width: 100%;">
          <label class="label-large" style="margin-right: 50px;">Follow up on:</label>
          <div class="Filterbtn" style="display: flex; justify-content: space-between; width: 200px;">
            <button class="btn btn-wdth text-white" [disabled]="followuponbutton()" (click)="filterCandidates()">Search</button>
            <button class="btn btn-wdth text-white" (click)="clearAndReload()">Clear</button>
          </div>
        </div>
      
        <div class="d-flex justify-content-between">
          <div class="col">
            <label>Start date:</label>
            <input type="date" class="form-control" id="followUpStartDate" placeholder="Start date"
              [(ngModel)]="followUpStartDate" [ngModelOptions]="{standalone: true}"  (change)="followstartdate = true">
          </div>
          <div class="col">
            <label>End date:</label>
            <input type="date" class="form-control" id="followUpEndDate" placeholder="End date"
              [(ngModel)]="followUpEndDate" [ngModelOptions]="{standalone: true}" (change)="followenddate = true">
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
        <div class="form-group">
          <div style="display: flex; justify-content: flex-end; align-items: center; width: 100%;">
            <label for="dateCreated" class="label-large" style="margin-right: 50px;">Date Created:</label>
            <div class="Filterbtn" style="display: flex; justify-content: space-between; width: 200px;">
              <button class="btn btn-wdth text-white" [disabled]="isSearchButtonDisabled()" (click)="onSearch()">Search</button>
              <button class="btn btn-wdth text-white" (click)="onClear()">Clear</button>
            </div>
          </div>
          
          <div class="d-flex justify-content-between">
            <div class="col">
              <label>Start date:</label>
              <input type="date" class="form-control" id="dateCreatedStartDate" placeholder="Start date"
                     [(ngModel)]="dateCreatedStartDate" [ngModelOptions]="{standalone: true}" (change)="fromDateEntered = true">
            </div>
            <div class="col">
              <label>End date:</label>
              <input type="date" class="form-control" id="dateCreatedEndDate" placeholder="End date"
                     [(ngModel)]="dateCreatedEndDate" [ngModelOptions]="{standalone: true}" (change)="toDateEntered = true">
            </div>
          </div>
        </div>
    </div>
</div>


  <div class="row mt-4 pl-3">
      <div class="col">
          <div class="table-container">
              <table class="table text-center">
                  <thead>
                    <tr style="min-width: auto;">
                      <th>Viewed By</th>
                      <th>Name</th>
                      <th>Email</th>
                      <th>Phone</th>
                      <th>Legal Status</th>
                      <th>Candidate Status</th>
                      <th (click)="sortTable('DateCreated')">
                        <span>Date Created</span>
                        <i class="fa" [ngClass]="{'fa-sort-asc': sortBy === 'DateCreated' && sortOrder === 'asc', 'fa-sort-desc': sortBy === 'DateCreated' && sortOrder === 'desc', 'fa-sort': sortBy !== 'DateCreated'}"></i>
                      </th>
                      <th>Follow_Up_On</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let candidate of candidates">
                      <tr *ngIf="isCandidateVisible(candidate)">
                          <td>{{ candidate.CreatedBy }}</td>
                          <td>{{ candidate.Name }}</td>
                          <td>{{ candidate.Email }}</td>
                          <td>{{ candidate.Phone }}</td>
                          <td>{{ candidate.LegalStatus }}</td>
                          <td>{{ candidate.CandidateStatus }}</td>
                          <td>{{ candidate.DateCreated | date:'MM/dd/yy' }}</td>
                          <td>
                            <div class="input-group d-flex justify-content-center align-items-center">
                              {{ candidate.followupon }}
                              
                            </div>
                          </td> 
                          <td><i class="fa fa-eye fa-fw pt-2" [routerLink]="['/reviewtresume/'+routeType+'/'+candidate.TraineeID+'/0']" style="font-size: 24px;"></i></td>
                          
                      </tr>
                      </ng-container>
                  </tbody>
              </table>
          </div>
      </div>
  </div>

  </div>
 </div>



 <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content container2 ">
        <div class="modal-header">
          <h2 class="modal-title" id="exampleModalLongTitle">Add Candidate</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span class="close" aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="container container2">
          <form [formGroup]="addCandidate">
            <div class="row">
              <div class="col-md-4">
                <label class="label">First Name *</label>
                <input type="text" class="form-control" name="firstName" placeholder="First name" formControlName="firstName" [ngClass]="{ 'invalid-input': addCandidate.get('firstName').invalid && addCandidate.get('firstName').touched }">
                <div *ngIf="addCandidate.get('firstName').invalid && addCandidate.get('firstName').touched"
                  class="validation-message" style="color: red;">
                  * Please enter valid First name.
                </div>
              </div>
              <div class="col-md-4">
                <label class="label">Middle Name</label>
                <input type="text" class="form-control" name="middleName" placeholder="Middle name"  [(ngModel)]="formData.middleName" [ngModelOptions]="{standalone: true}">
              </div>
              <div class="col-md-4">
                <label class="label">Last Name *</label>
                <input type="text" class="form-control" name="lastName" placeholder="Last name" formControlName="lastName" [ngClass]="{ 'invalid-input': addCandidate.get('lastName').invalid && addCandidate.get('lastName').touched }">
                <div *ngIf="addCandidate.get('lastName').invalid && addCandidate.get('lastName').touched"
                  class="validation-message" style="color: red;">
                  * Please enter valid Last name.
                </div>
              </div>
            </div>
            <div class="row">
              <!-- <div class="col-md-4">
                <label class="label">Email</label>
                <input type="email" class="form-control" name="email" placeholder="Email" formControlName="email" [ngClass]="{ 'invalid-input': addCandidate.get('email').invalid && addCandidate.get('email').touched }">
                <div *ngIf="addCandidate.get('email').invalid && addCandidate.get('email').touched"
                  class="validation-message" style="color: red;">
                  * Please enter valid Email.
                </div>
              </div> -->

              <div class="col-md-4">
                <label class="label">Email</label>
                <input
                    type="email"
                    class="form-control"
                    name="email"
                    placeholder="Email"
                    formControlName="email"
                    [ngClass]="{
                        'invalid-input':
                            addCandidate.get('email').invalid &&
                            addCandidate.get('email').touched
                    }"
                    (blur)="onEmailInput()"
                />
                <div
                    *ngIf="
                        addCandidate.get('email').invalid &&
                        addCandidate.get('email').touched
                    "
                    class="validation-message"
                    style="color: red;"
                >
                    * Please enter a valid Email.
                </div>
                <div
                    *ngIf="emailvalidation"
                    class="validation-message"
                    style="color: red;"
                >
                    {{emailvalidationmessage}}
                </div>
            </div>
            
              <div class="col-md-4">
                <label class="label">Phone</label>
                <input type="tel" class="form-control" name="phone" placeholder="Phone" formControlName="phone" [ngClass]="{ 'invalid-input': addCandidate.get('phone').invalid && addCandidate.get('phone').touched }">
                <div *ngIf="addCandidate.get('phone').invalid && addCandidate.get('phone').touched"
                  class="validation-message" style="color: red;">
                  * Please enter valid Phone Number.
                </div>
              </div>
              <div class="col-md-4 text-center">
                <label class="label">Gender</label>
                <div class="radio">
                  <input type="radio" id="male" name="gender" formControlName="gender" value="male" >
                  <label for="male">Male</label>
                  
                  <input type="radio" id="female" name="gender" formControlName="gender" value="female">
                  <label for="female">Female</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4" *ngIf="routeType == 1 && routeType == 2">
                <label class="label">Recruiter Name *</label>
                <!-- // check next 2 line if any error  -->
                <!-- <select class="form-control" name="recruiterName" formControlName="recruiterName" [ngClass]="{ 'invalid-input': addCandidate.get('recruiterName').hasError('atLeastOneSelected') && addCandidate.get('recruiterName').touched }">
                  <option *ngFor="let name of recruiterNames" [value]="name.id">{{name.MemberFirstName }} {{name.MemberLastName }}</option> -->
                <!-- <select class="form-control" name="recruiterName" formControlName="recruiterName" [ngClass]="{ 'invalid-input': addCandidate.get('recruiterName').hasError('atLeastOneSelected') && addCandidate.get('recruiterName').touched }"> -->
                <select class="form-control" name="recruiterName" [(ngModel)]="recruiterName" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let name of recruiterNames" [value]="name.traineeid">{{name.firstname }} {{name.lastname }}</option>
                </select>
                <!-- <div *ngIf="addCandidate.get('recruiterName').hasError('atLeastOneSelected') && addCandidate.get('recruiterName').touched" class="validation-message" style="color: red;">
                  * Please select at least one Recruiter Name.
                </div> -->
              </div>
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Degree</label>
                <input type="text" class="form-control" name="degree" placeholder="Degree" formControlName="degree">
              </div>
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">University</label>
                <input type="text" class="form-control" name="university" placeholder="University" formControlName="university">
              </div>
            </div>
            <div class="row">
              <div class="col-md-4"  *ngIf="routeType == 1">
                <!-- <label class="label">Candidate Status</label>
                <select class="form-control" name="candidateStatus" [(ngModel)]="formData.candidateStatus" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let status of candidateStatuses" [value]="status">{{ status }}</option>
                </select> -->
              <label class="label">Candidate Status</label>
              <select class="form-control" id="currentStatus" [(ngModel)]="selectedcurrentstatus"
                [ngModelOptions]="{standalone: true}">
                <option *ngFor="let option of  currentStatusOptions" [value]="option.CandidateStatusID">{{ option.Value }}</option>
              </select>
              </div>
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Referral Type</label>
                <select class="form-control" name="referralType" [(ngModel)]="formData.referralType" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let type of referralTypes" [value]="type">{{ type }}</option>
                </select>
              </div>
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Legal Status</label>
                <!-- <select class="form-control" name="legalStatus" [(ngModel)]="formData.legalStatus" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let stat of legalStatus" [value]="stat">{{ stat }}</option>
                </select> -->
                <select class="form-control" name="legalStatus" [(ngModel)]="legalStatus" [ngModelOptions]="{standalone: true}">
                  <option value>-- Select Legal Status --</option>
                  <option *ngFor="let stat of legalStatusOptions" [value]="stat.LegalStatusID">{{ stat.LegalValue }}</option>
                </select>
              </div>
            </div>
            <div class="row">
              <!-- <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Marketer Name</label>
                <select class="form-control" name="marketerName" [(ngModel)]="formData.marketerName" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let name of marketerNames" [value]="name.id">{{name.MemberFirstName }} {{name.MemberLastName }}</option>
                </select>
              </div> -->
              <!-- <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Follow Up on*</label>
                <input type="text" class="form-control" name="followUpon" placeholder="Select Option" formControlName="followUpon">
              </div> -->
              <div class="col-md-4" *ngIf="routeType == 1">
                <!-- <label class="label">Location Constraint</label>
                <div class="radio">
                  <input type="radio" name="locationConstraint" value="yes">Yes
                  <input type="radio" name="locationConstraint" value="no">No
                </div> -->
              </div>
              <!-- <div class="col-md-4">
                <label class="label">Video</label>
                <input type="file" class="form-control" name="video">
              </div> -->
            </div>
            <!-- <div class="row">
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Referral Type</label>
                <select class="form-control" name="referralType" [(ngModel)]="formData.referralType" [ngModelOptions]="{standalone: true}">
                  <option *ngFor="let type of referralTypes" [value]="type">{{ type }}</option>
                </select>
              </div>
              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Notes</label>
                <textarea class="textarea" name="notes" rows="4" formControlName="notes"></textarea>
              </div>
            </div> -->

            <div class="row">
              <!-- <div class="col-md-4">
                <label class="label">Follow Up On *</label>
                <select name="FollowUpOn" id="FollowUpOn" class="form-control" [(ngModel)]="selectedFollowUpOption">
                  <option selected="selected" value="Never">Never</option>
                  <option value="SpecifiedDate">Specified Date</option>
                </select>
              </div> -->
              
              <div class="col-md-4">
                <label class="label">Follow Up On *</label>
                <select name="FollowUpOn" id="FollowUpOn" class="form-control" [(ngModel)]="selectedFollowUpOption" [ngModelOptions]="{standalone: true}">
                    <option selected="selected" value="Never">Never</option>
                    <option value="SpecifiedDate">Specified Date</option>
                </select>
                
                <!-- Additional input field for specific date --> 
                <div *ngIf="selectedFollowUpOption === 'SpecifiedDate'">
                    <label class="label" for="specifiedDateInput">Specify the followup date:</label>
                    <!-- <input type="date" id="specifiedDateInput" name="specifiedDate" class="form-control" [(ngModel)]="specifiedDate" [ngModelOptions]="{standalone: true}"> -->
                    <input type="date" id="specifiedDateInput" name="specifiedDate" class="form-control"
                    [(ngModel)]="specifiedDate" [ngModelOptions]="{standalone: true}" style="margin-left: -1px;">
                </div>
            </div>

              <div class="col-md-4" *ngIf="routeType == 1">
                <label class="label">Notes</label>
                <textarea class="textarea" name="notes" rows="4" formControlName="notes"></textarea>
              </div>
              
              <div class="col-md-4">
                <div class="form-group text-center">
                  <label>Current Location</label>
                  <select class="form-control" name="Location" [(ngModel)]="currentLocation" [ngModelOptions]="{standalone: true}" >
                    <option value="">Select</option>
                    <option *ngFor="let location of Locations?.result || []" [value]="location.state">{{ location.state }}</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- For TimeSheet -->
            <div class="row" *ngIf="routeType == 2">
              <div class="col-md-4">
                <label class="label">Admin</label>
                <select class="form-control" name="adminSelect" id="adminSelect"></select>
              </div>

              <div class="col-md-4" *ngIf="routeType == 2">
                <label class="label">Client</label>
                <select class="form-control" name="clientselect" id="clientselect"></select>
            </div>

              <div class="col-md-4" *ngIf="routeType == 2">
                <label class="label">Project</label>
                <select class="form-control" name="" id=""></select>
              </div>
          </div>

          <div class="row">
            <div class="col-md-4" *ngIf="routeType == 2">
              <label class="label">Invoice Start Date</label>
              <input type="date" class="form-control">
            </div>

            <div class="col-md-4" *ngIf="routeType == 2">
              <label class="label">Invoice Start Date</label>
              <input type="date" class="form-control">
            </div>

            <div class="col-md-4">
              <!-- <label class="label"></label>
              <input type="date" class="form-control"> -->
            </div>
          </div>

          <div class="row">
            <div class="col-md-4" *ngIf="routeType == 2">
              <label class="label">Current Location</label>
              <input type="text" name="" id="" class="form-control">
            </div>

            <div class="col-md-4" *ngIf="routeType == 2  ">
              <label class="label">Notes</label>
              <textarea class="textarea" name="notes" rows="4" formControlName="notes"></textarea>
            </div>
          </div>
          </form>
        </div>
       
        <div class="modal-footer">
          <button type="button" class="btn" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn" data-dismiss="modal" (click)="savehrmsdata()" [disabled]="emailvalidation">Save</button>
        </div>
      </div>
    </div>
  </div>
  
<p-toast position="bottom-right"></p-toast>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>

